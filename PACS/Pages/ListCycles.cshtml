@page
@using PACS.Models;
@model PACS.Pages.ListCyclesModel
@{
    ViewData["Title"] = "Список контроля событий";
}
<style>
    a {
        margin-left: 10%;
        margin-right: 10%;
    }

    .btn-warning {
        background-color: #fc7703;
        color: white;
    }

        .btn-warning:hover {
            background-color: #fc6b03;
            color: white;
        }
</style>
<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand">СКУД</a>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="btn btn-danger" asp-page="/Index">Выйти</a>
            </li>
            <li class="nav-item">
                <a class="btn btn-success" asp-page="/ListPass">Проходы</a>
            </li>
            <li class="nav-item">
                <a class="btn btn-warning" asp-page="/ListOffenders" asp-page-handler="@Model.UserSession">Нарушители</a>
            </li>
        </ul>
    </div>
</nav>

<div class="container">
    <div class="row">
        <div class="col-3">
            <h3 class="align-content-center">Список контроля событий</h3>
        </div>
    </div>
</div>

<table class="table container">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Код</th>
            <th scope="col">Время проезда через первую точку</th>
            <th scope="col">Время проезда через вторую точку</th>
            <th scope="col">Время между точками</th>
        </tr>
    </thead>
    <tbody>
        @try
        {
            @foreach (Cycle cycles in @Model.Cycles)
            {
                <tr>
                    <th scope="row">@cycles.Id</th>
                    <td>@cycles.W26</td>
                    <td>@cycles.TimeP1</td>
                    <td>@cycles.TimeP2</td>
                    <td>@cycles.Delta</td>
                </tr>
            }
        }
        catch
        {
            return;
        }
    </tbody>
</table>


<script type="text/javascript">
    window.onload = function () {
        setTimeout('refresh()', 10000); // интервал обновления 10 секунд (10000 миллисекунд)
    }

    function refresh() {
        window.location.reload(true);
        window.location.r
    }
</script>
